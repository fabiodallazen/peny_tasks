<!DOCTYPE html>
<html>
<head>
  <title><%= content_for(:title) || "Penny Tasks App" %></title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <%= yield :head %>

  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="<%= asset_path 'favicon.png' %>" type="image/png">
  <link rel="apple-touch-icon" href="<%= asset_path 'favicon.png' %>">

  <!-- Bootstrap CSS via CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= javascript_include_tag "application", "data-turbo-track": "reload", type: "module" %>
</head>
<body>
<% flash.each do |key, message| %>
  <% bootstrap_class = case key.to_sym
    when :notice then 'alert alert-success'
    when :alert then 'alert alert-danger'
    else 'alert alert-info'
  end %>

  <div class="flash-message <%= bootstrap_class %>" role="alert">
    <%= message %>
  </div>
<% end %>

<%= yield %>

<!-- Bootstrap Bundle with Popper via CDN (at the end of body) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

<script>
    // Auto-hide flash messages after 5 seconds
    setTimeout(() => {
        document.querySelectorAll('.flash-message').forEach(flash => {
            flash.style.transition = "opacity 0.5s ease-out";
            flash.style.opacity = '0';
            setTimeout(() => flash.remove(), 500);
        })
    }, 5000);
</script>
</body>
</html>
